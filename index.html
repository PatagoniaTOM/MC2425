<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ensayo de Adaptabilidad </title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2E8B57;
            color: white;
            text-align: center;
        }
        .content {
            background-color: #2E8B57;
            padding: 20px;
        }
        .logo {
            background-color: white;
            padding: 20px;
        }
        .logo img {
            max-width: 100%;
        }
        .note-section {
            background-color: white;
            color: black;
            padding: 20px;
            margin: 20px 0;
        }
        .note-section textarea {
            width: 100%;
            height: 100px;
        }
        .note-section .word-count {
            text-align: right;
        }
        .button {
            background-color: #25D366;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin: 10px;
        }
        .email-button {
            background-color: #0072C6;
        }
        .footer {
            margin-top: 20px;
        }
        .separator {
            border-top: 2px solid white;
            margin: 20px 0;
        }
        .countdown {
            color: orange;
            font-weight: bold;
        }
    </style>
    <script>
        function checkPassword() {
            const password = prompt("Ingrese la contraseña:");
            if (password === "ffff") {
                document.getElementById('main-content').style.display = 'block';
            } else {
                alert("Contraseña incorrecta");
            }
        }

        function updateCountdown() {
            const transplantDate = new Date('2025-02-16');
            const today = new Date();
            const timeDiff = transplantDate - today;
            const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
            document.getElementById('countdown').innerText = daysLeft;

            const transplantDatePast = new Date('2024-10-11');
            const daysSinceTransplant = Math.ceil((today - transplantDatePast) / (1000 * 60 * 60 * 24));
            document.getElementById('days-since-transplant').innerText = daysSinceTransplant;

            const harvestDate = new Date('2025-02-16');
            const totalDays = Math.ceil((harvestDate - transplantDatePast) / (1000 * 60 * 60 * 24));
            const progress = ((daysSinceTransplant / totalDays) * 100).toFixed(2);
            document.getElementById('progress').innerText = progress + '%';

            const weekNumber = Math.ceil((today - new Date(today.getFullYear(), 0, 1)) / (1000 * 60 * 60 * 24 * 7));
            document.getElementById('week-number').innerText = weekNumber;
        }

        function updateWordCount(textarea, countDisplay) {
            const maxWords = 200;
            const words = textarea.value.split(/\s+/).filter(word => word.length > 0);
            const wordsLeft = maxWords - words.length;
            countDisplay.innerText = `Palabras restantes: ${wordsLeft}`;
        }

        function shareViaWhatsApp() {
            const text = document.body.innerText;
            const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        function shareViaEmail() {
            const text = document.body.innerText;
            const mailto = `mailto:?subject=Información de Ensayo&body=${encodeURIComponent(text)}`;
            window.open(mailto, '_blank');
        }

        document.addEventListener('DOMContentLoaded', () => {
            checkPassword();
            updateCountdown();
        });
    </script>
</head>
<body>
    <div id="main-content" style="display:none;">
        <div class="content">
            <h1>Información de ensayo de adaptabilidad Ciclo Corto 2024-2025</h1>
            <h1>Miguel Contreras</h1>
            <div class="logo">
                <img src="https://empresasiansa.cl/patagoniafresh/wp-content/uploads/sites/6/2020/03/logo-patagoniafresh.svg" alt="Logo Patagonia Fresh">
            </div>
            <h2>Tiempo en dias para Cosecha ensayo ciclo corto T24-25 en base a 128 dias de ciclo</h2>
            <h1><p class="countdown" id="countdown"></p></h1>
            <div class="separator"></div>
            <h2>Número de semana actual: <strong id="week-number"></strong></h2>
            <p>Fecha de trasplante: 11-10-2024</p>
            <div class="separator"></div>
            <h2>Días desde el trasplante: <strong id="days-since-transplant"></strong></h2>
            <p>Porcentaje de avance de desarrollo del cultivo acorde al ciclo teórico: <strong id="progress"></strong></p>
            <div class="separator"></div>
            <p>Click en el icono inferior para ver el mapa del ensayo</p>
            <a href="https://drive.google.com/drive-viewer/AKGpihbXQAsG1EdMGqBZ4J8J9qnVe0ycshqRwBabCUh8neSAOErKkATAsjrXdAu9pgNGkLSxxoyy0Er2xzpZhMhq-Vg9MMlubCPoeC8=s2560?source=screenshot.guru"> <img src="https://drive.google.com/drive-viewer/AKGpihbXQAsG1EdMGqBZ4J8J9qnVe0ycshqRwBabCUh8neSAOErKkATAsjrXdAu9pgNGkLSxxoyy0Er2xzpZhMhq-Vg9MMlubCPoeC8=s2560" /> </a>
            <h2>Variedades en el ensayo</h2>
            <p><strong>SVTM9027 (probada el 23-24) </strong></p>
            <p><strong>SVTM9032 (probada el 23-24) </strong></p>
            <div class="note-section">
                <h3>Desea agregar una nota general</h3>
                <textarea oninput="updateWordCount(this, document.getElementById('word-count'))"></textarea>
                <div class="word-count" id="word-count">Palabras restantes: 200</div>
            </div>
            <button class="button" onclick="shareViaWhatsApp()">Compartir vía WhatsApp</button>
            <button class="button email-button" onclick="shareViaEmail()">Compartir vía Email</button>
            <div class="footer">
                <p>Creado por Christian Stange Marcus | Agrónomo Desarrollo</p>
                <p>Panamericana Sur 2013, San Fernando. O’Higgins</p>
                <p>Cel: +56 9 9002 7631</p>
                <p><a href="mailto:christian.stange@patagoniafresh.cl" style="color: white;">christian.stange@patagoniafresh.cl</a></p>
                <p>Visitas al sitio: <span id="visit-count">0</span></p>
                <p>Creado con AI</p>
            </div>
        </div>
    </div>
</body>
</html>
